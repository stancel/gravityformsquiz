!function(i,g){var u={};function t(i){switch(i){case"none":g("#gquiz-grading-pass-fail-container").fadeOut("fast"),g("#gquiz-grading-letter-container").fadeOut("fast");break;case"passfail":g("#gquiz-grading-letter-container").fadeOut("fast"),g("#gquiz-grading-pass-fail-container").fadeIn("fast");break;case"letter":g("#gquiz-grading-pass-fail-container").fadeOut("fast"),g("#gquiz-grading-letter-container").fadeIn("fast")}}function s(i,e){this.text=i,this.value=e}function r(){for(var i=gquizVars.imagesUrl,e="",a=0;a<u.length;a++)e+="<li data-index='"+a+"'>",e+="<i class='fa fa-sort field-choice-handle gquiz-grade-handle' title='"+gquiz_strings.dragToReOrder+"'></i>",e+="<input type='text' id='gquiz-grade-text-"+a+"' value=\""+u[a].text.replace(/"/g,"&quot;")+"\"  class='gquiz-grade-input gquiz-grade-text' />",e+=" <span class='gquiz-greater-than-or-equal'>&gt;=</span> ",e+="<input type='text' id='gquiz-grade-value-"+a+"' value=\""+u[a].value+"\" class='gquiz-grade-input gquiz-grade-value' >",e+=" <span class='gquiz-percentage'>&#37;</span> ",e+="<img src='"+i+"/add.png' class='gquiz-add-grade' title='"+gquiz_strings.addAnotherGrade+"' alt='"+gquiz_strings.addAnotherGrade+"' style='cursor:pointer; margin:0 3px;' onclick=\"gquiz.insertGrade("+(a+1)+');" />',1<u.length&&(e+="<img src='"+i+"/remove.png' title='"+gquiz_strings.removeThisGrade+"' alt='"+gquiz_strings.removeThisGrade+"' class='gquiz-delete-grade' style='cursor:pointer;' onclick=\"gquiz.deleteGrade("+a+');" />'),e+="</li>";return e}function d(){g("ul#gquiz-grades li").each(function(i){var e=g(this),a=e.children("input.gquiz-grade-text").val(),t=e.children("input.gquiz-grade-value").val(),n=e.data("index"),r=new s(a,parseInt(t));u[parseInt(n)]=r})}i.init=function(){var i,e,a=g("#grades").val();u=g.parseJSON(a),g(".gquiz-grading").click(function(){t(this.value)}),t(g("input[name='_gaddon_setting_grading']:checked").val()),g("#passfaildisplayconfirmation, #letterdisplayconfirmation").click(function(){g(this).parent().siblings(".gquiz-quiz-confirmation").toggle()}),i=g("#passfaildisplayconfirmation").prop("checked"),e=g("#letterdisplayconfirmation").prop("checked"),i?g("#gquiz-grading-pass-fail-container .gquiz-quiz-confirmation").show():g("#gquiz-grading-pass-fail-container .gquiz-quiz-confirmation").hide(),e?g("#gquiz-grading-letter-container .gquiz-quiz-confirmation").show():g("#gquiz-grading-letter-container .gquiz-quiz-confirmation").hide(),t(),g("#gquiz-grades").html(r()),g(document).on("blur","input.gquiz-grade-value",function(){var i=g(this),e=i.val();e<0||isNaN(e)?i.val(0):100<e&&i.val(100)}),g(document).on("keypress","input.gquiz-grade-value",function(i){return 27==i.which?(this.blur(),!1):0===i.which||8===i.which||void((i.which<48||57<i.which)&&i.preventDefault())}),g("#gquiz-grades").sortable({axis:"y",handle:".gquiz-grade-handle",update:function(i,e){!function(i,e){d();var a=u[i];u.splice(i,1),u.splice(e,0,a),g("div#gquiz-settings-grades-container ul#gquiz-grades").html(r())}(e.item.data("index"),e.item.index())}}),g("#gform-settings").submit(function(){d(),g("#grades").val(g.toJSON(u))})},i.insertGrade=function(i){var e;d();var a=u[i-1],t=u[i];e=void 0===t?0:t.value;var n=new s("",parseInt(e)+parseInt((a.value-e)/2));u.splice(i,0,n),g("div#gquiz-settings-grades-container ul#gquiz-grades").html(r())},i.deleteGrade=function(i){d(),u.splice(i,1),g("div#gquiz-settings-grades-container ul#gquiz-grades").html(r())},String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(i,e){return void 0!==a[e]?a[e]:i})}}(window.gquiz=window.gquiz||{},jQuery),jQuery(document).ready(function(){gquiz.init()}),jQuery(document).ready(function(){});